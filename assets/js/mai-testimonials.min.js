!function(){var allSliders=document.querySelectorAll(".mait-slider"),sliderButtons=document.querySelectorAll(".mait-button"),hasFocus=!1,prevPage=1,nextPage=1,paged=1,getTestimonials=function(event){if(event.preventDefault(),!event.target.getAttribute("data-disabled")){var slider=event.target.closest(".mait-slider"),args=JSON.parse(slider.getAttribute("data-args"));prevPage=slider.getAttribute("data-prev"),nextPage=slider.getAttribute("data-next"),paged=event.target.getAttribute("data-paged"),args.paged=paged,getSlide(slider,args)}},getSlide=function(slider,args){var data={action:"mait_ajax_get_testimonials",nonce:maiTestimonialsVars.nonce,block_args:JSON.stringify(args)},current=slider.querySelector(".mait-testimonials:not(.mait-hidden)");current.classList.add("mait-loading"),fetch(maiTestimonialsVars.ajaxurl,{method:"POST",credentials:"same-origin",headers:{"Content-Type":"application/x-www-form-urlencoded","Cache-Control":"no-cache"},body:new URLSearchParams(data)}).then(response=>response.json()).then(data=>{if(data.success){prevPage=data.data.prev,nextPage=data.data.next,paged=data.data.paged;var existing=slider.querySelector('.mait-testimonials[data-paged="'+paged+'"]');if(existing)existing.classList.remove("mait-hidden");else{var div=document.createElement("div");div.innerHTML=data.data.html.trim();var slide=div.firstChild,last;slider.querySelector(".mait-testimonials:last-of-type").after(slide)}slider.querySelectorAll('.mait-testimonials:not([data-paged="'+paged+'"])').forEach((function(toHide){toHide.classList.add("mait-hidden")})),slider.setAttribute("data-prev",prevPage),slider.setAttribute("data-next",nextPage),slider.setAttribute("data-paged",paged);var disabled=slider.querySelector('.mait-dot[data-disabled="true"]');disabled&&(disabled.removeAttribute("data-disabled"),disabled.classList.remove("mait-current"));var dot=slider.querySelector('.mait-dot[data-paged="'+paged+'"]');dot&&(dot.setAttribute("data-disabled",!0),dot.classList.add("mait-current"));var prev=slider.querySelector(".mait-previous"),next=slider.querySelector(".mait-next");prev&&prev.setAttribute("data-paged",prevPage),next&&next.setAttribute("data-paged",nextPage),setTimeout((function(){current.classList.remove("mait-loading")}),500)}}).catch(error=>{console.log("Mai Testimonials block:",error)})},handleArrowKeys=function(event){var focusedSlider=!1;if(document.activeElement&&(focusedSlider=document.activeElement.classList.contains("mait-slider")?document.activeElement:document.activeElement.closest(".mait-slider")),console.log(document.activeElement),focusedSlider){var args=JSON.parse(focusedSlider.getAttribute("data-args")),keys;if(["ArrowLeft","ArrowRight"].includes(event.key)){switch(event.key){case"ArrowLeft":paged=prevPage;break;case"ArrowRight":paged=nextPage}args.paged=paged,getSlide(focusedSlider,args)}}};sliderButtons.forEach((function(sliderButton){sliderButton.addEventListener("click",getTestimonials,!1)})),document.body.addEventListener("keydown",handleArrowKeys)}();