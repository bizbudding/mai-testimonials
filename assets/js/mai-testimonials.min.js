!function(){var sliderButtons=document.querySelectorAll(".mait-button"),getTestimonials=function(event){event.preventDefault();var el=event.target.classList.contains("mait-button")?event.target:event.target.closest(".mait-button");el.dataset.disabled||(slider=el.closest(".mait-slider"),paged=el.dataset.slide,getSlide(slider,paged))},handleArrowKeys=function(event){var slider=!1,keys;if((document.activeElement&&(slider=document.activeElement.classList.contains("mait-slider")?document.activeElement:document.activeElement.closest(".mait-slider")),slider)&&["ArrowLeft","ArrowRight"].includes(event.key)){switch(event.key){case"ArrowLeft":paged=slider.dataset.prev;break;case"ArrowRight":paged=slider.dataset.next}getSlide(slider,paged)}},getSlide=function(slider,paged){if(current=slider.querySelector('.mait-testimonials[data-slide="'+slider.dataset.current+'"]'),existing=slider.querySelector('.mait-testimonials[data-slide="'+paged+'"]'),current.innerHTML+='<span class="mai-testimonials-loading__overlay"><svg class="mai-testimonials-loading__ring" viewBox="25 25 50 50" stroke-width="5"><circle cx="50" cy="50" r="20" /></svg>',current.classList.add("mait-loading"),existing)doNextSlide(slider,paged);else{args=JSON.parse(slider.dataset.args),args.paged=paged;var data={action:"mait_ajax_get_testimonials",nonce:maiTestimonialsVars.nonce,block_args:JSON.stringify(args)};fetch(maiTestimonialsVars.ajaxurl,{method:"POST",credentials:"same-origin",headers:{"Content-Type":"application/x-www-form-urlencoded","Cache-Control":"no-cache"},body:new URLSearchParams(data)}).then(response=>response.json()).then(response=>{if(response.success){var div=document.createElement("div"),last;div.innerHTML=response.data.html.trim(),slider.querySelector(".mait-testimonials:last-of-type").after(div.firstChild),doNextSlide(slider,response.data.paged)}}).catch(error=>{console.log("Mai Testimonials block:",error)})}},doNextSlide=function(slider,paged){paged=parseInt(paged),slider.querySelectorAll('.mait-testimonials:not([data-slide="'+paged+'"])').forEach((function(slide){hideSlide(slide)})),showSlide(slider.querySelector('.mait-testimonials[data-slide="'+paged+'"]'));var max=parseInt(slider.dataset.max),prevPage=paged-1,nextPage=paged+1;prevPage<1&&(prevPage=max),nextPage>max&&(nextPage=1),slider.setAttribute("data-prev",prevPage),slider.setAttribute("data-next",nextPage),slider.setAttribute("data-current",paged);var disabled=slider.querySelector('.mait-dot[data-disabled="true"]');disabled&&(disabled.removeAttribute("data-disabled","false"),disabled.classList.remove("mait-current"));var dot=slider.querySelector('.mait-dot[data-slide="'+paged+'"]');dot&&(dot.setAttribute("data-disabled","true"),dot.classList.add("mait-current"));var prev=slider.querySelector(".mait-previous"),next=slider.querySelector(".mait-next");prev&&prev.setAttribute("data-slide",prevPage),next&&next.setAttribute("data-slide",nextPage),current.classList.remove("mait-loading"),slider.querySelector(".mai-testimonials-loading__overlay").remove()},hideSlide=function(slide){slide.classList.add("mait-hidden"),slide.setAttribute("aria-hidden","true")},showSlide=function(slide){slide.classList.remove("mait-hidden"),slide.setAttribute("aria-hidden","false")};sliderButtons.forEach((function(sliderButton){sliderButton.addEventListener("click",getTestimonials,!1)})),document.body.addEventListener("keydown",handleArrowKeys)}();